# TaleTrail Desktop Environment Configuration
# ============================================
# Copy this file to .env and customize for your environment
# These values override config.toml settings
#
# Configuration Priority (lowest to highest):
#   1. Constants Module (default values in code)
#   2. config.toml (structured configuration file)
#   3. .env file (THIS FILE - optional environment overrides)
#   4. System Environment Variables (highest priority)

# ============================================================================
# NATS Configuration (Backend)
# ============================================================================

# NATS server URL
# Default: nats://localhost:5222
# TALETRAIL_NATS_URL=nats://localhost:5222

# NATS connection timeout (milliseconds)
# Default: 5000
# TALETRAIL_NATS_TIMEOUT_MS=5000

# NATS request timeout (milliseconds)
# Default: 180000 (3 minutes)
# TALETRAIL_NATS_REQUEST_TIMEOUT_MS=180000

# Enable TLS for NATS connection
# Default: true
# TALETRAIL_NATS_TLS_ENABLED=true

# ============================================================================
# Path Configuration (Backend)
# ============================================================================

# Override trails directory (relative to desktop app)
# Default: taletrail-data/trails
# TALETRAIL_TRAILS_DIR=taletrail-data/trails

# Override templates directory (relative to project root)
# Default: templates
# TALETRAIL_TEMPLATES_DIR=templates

# Override certificates directory (relative to project root)
# Default: certs
# TALETRAIL_CERTS_DIR=certs

# CA certificate filename
# Default: ca.pem
# TALETRAIL_CA_CERT_FILE=ca.pem

# Override NKeys directory (relative to project root)
# Default: nkeys
# TALETRAIL_NKEYS_DIR=nkeys

# Desktop NKey filename
# Default: desktop.nk
# TALETRAIL_DESKTOP_NKEY_FILE=desktop.nk

# ============================================================================
# Development Configuration (Backend & Frontend)
# ============================================================================

# Enable debug logging in backend
# Default: false
# TALETRAIL_DEBUG=true

# Frontend dev server port
# Default: 3030
# TALETRAIL_DEV_PORT=3030
# VITE_DEV_PORT=3030

# HMR WebSocket port (Hot Module Replacement)
# Default: 3031
# TALETRAIL_HMR_PORT=3031
# VITE_HMR_PORT=3031

# ============================================================================
# MCP Configuration (Backend)
# ============================================================================

# Override available MCP servers (comma-separated)
# Default: orchestrator,story-generator,quality-control,constraint-enforcer,prompt-helper
# TALETRAIL_MCP_SERVERS=orchestrator,story-generator,quality-control,constraint-enforcer,prompt-helper

# MCP request timeout (milliseconds)
# Default: 180000 (3 minutes)
# TALETRAIL_MCP_TIMEOUT_MS=180000

# ============================================================================
# NATS Subjects Configuration (Backend)
# ============================================================================

# Base subject for generation events (subscribed by desktop)
# Default: taletrail.generation.events
# TALETRAIL_GENERATION_EVENTS_BASE=taletrail.generation.events

# Tenant-specific generation events pattern (use {tenant_id} placeholder)
# Default: taletrail.generation.events.{tenant_id}
# TALETRAIL_GENERATION_EVENTS_TENANT_PATTERN=taletrail.generation.events.{tenant_id}

# Orchestrator request subject
# Default: mcp.orchestrator.request
# TALETRAIL_ORCHESTRATOR_REQUEST_SUBJECT=mcp.orchestrator.request

# ============================================================================
# MCP Server Request Subjects (Backend)
# ============================================================================

# Individual MCP server request subjects for direct communication
# Default: mcp.orchestrator.request
# TALETRAIL_MCP_SUBJECT_ORCHESTRATOR=mcp.orchestrator.request

# Default: mcp.story-generator.request
# TALETRAIL_MCP_SUBJECT_STORY_GENERATOR=mcp.story-generator.request

# Default: mcp.quality-control.request
# TALETRAIL_MCP_SUBJECT_QUALITY_CONTROL=mcp.quality-control.request

# Default: mcp.constraint-enforcer.request
# TALETRAIL_MCP_SUBJECT_CONSTRAINT_ENFORCER=mcp.constraint-enforcer.request

# Default: mcp.prompt-helper.request
# TALETRAIL_MCP_SUBJECT_PROMPT_HELPER=mcp.prompt-helper.request

# ============================================================================
# MCP Template Paths Configuration (Backend)
# ============================================================================

# MCP server template subdirectories (relative to templates_dir)
# Default: orchestrator
# TALETRAIL_MCP_TEMPLATES_ORCHESTRATOR=orchestrator

# Default: story-generator
# TALETRAIL_MCP_TEMPLATES_STORY_GENERATOR=story-generator

# Default: quality-control
# TALETRAIL_MCP_TEMPLATES_QUALITY_CONTROL=quality-control

# Default: constraint-enforcer
# TALETRAIL_MCP_TEMPLATES_CONSTRAINT_ENFORCER=constraint-enforcer

# Default: prompt-helper
# TALETRAIL_MCP_TEMPLATES_PROMPT_HELPER=prompt-helper

# Template file extension
# Default: .json
# TALETRAIL_TEMPLATE_FILE_EXTENSION=.json

# ============================================================================
# Validation Configuration (Backend)
# ============================================================================

# Valid story structure presets (comma-separated)
# Default: guided,adventure,epic,choose_your_path
# TALETRAIL_VALID_STORY_STRUCTURES=guided,adventure,epic,choose_your_path

# Minimum number of nodes in a story
# Default: 5
# TALETRAIL_MIN_NODE_COUNT=5

# Maximum number of nodes in a story
# Default: 50
# TALETRAIL_MAX_NODE_COUNT=50

# Default maximum choices per node
# Default: 4
# TALETRAIL_DEFAULT_MAX_CHOICES_PER_NODE=4

# Minimum choices per node
# Default: 2
# TALETRAIL_MIN_CHOICES_PER_NODE=2

# Maximum choices per node
# Default: 10
# TALETRAIL_MAX_CHOICES_PER_NODE=10

# Minimum story length in characters
# Default: 100
# TALETRAIL_MIN_STORY_LENGTH=100

# Maximum story length in characters
# Default: 10000
# TALETRAIL_MAX_STORY_LENGTH=10000

# ============================================================================
# Timeout Configuration (Backend)
# ============================================================================

# Default request timeout in seconds (3 minutes)
# Default: 180
# TALETRAIL_DEFAULT_REQUEST_TIMEOUT_SECS=180

# Minimum allowed timeout in seconds
# Default: 30
# TALETRAIL_MIN_REQUEST_TIMEOUT_SECS=30

# Maximum allowed timeout in seconds (5 minutes)
# Default: 300
# TALETRAIL_MAX_REQUEST_TIMEOUT_SECS=300

# ============================================================================
# History Management Configuration (Backend)
# ============================================================================

# Tauri store key for MCP history
# Default: mcp_history
# TALETRAIL_HISTORY_STORE_KEY=mcp_history

# Tauri store file name
# Default: mcp-history.json
# TALETRAIL_HISTORY_STORE_FILE=mcp-history.json

# Default pagination page size for history
# Default: 50
# TALETRAIL_HISTORY_DEFAULT_PAGE_SIZE=50

# Maximum pagination page size for history
# Default: 200
# TALETRAIL_HISTORY_MAX_PAGE_SIZE=200

# Minimum pagination page size for history
# Default: 10
# TALETRAIL_HISTORY_MIN_PAGE_SIZE=10

# ============================================================================
# Monitoring Configuration (Backend)
# ============================================================================

# Maximum event buffer size
# Default: 1000
# TALETRAIL_MAX_EVENT_BUFFER=1000

# Request cleanup timeout (seconds)
# Default: 3600 (1 hour)
# TALETRAIL_REQUEST_CLEANUP_TIMEOUT=3600

# Event types for filtering (comma-separated)
# Default: Started,Progress,Completed,Failed,ToolExecution
# TALETRAIL_EVENT_TYPES=Started,Progress,Completed,Failed,ToolExecution

# ============================================================================
# Frontend Configuration
# ============================================================================

# NATS server URL (frontend display only, backend handles actual connection)
# Default: nats://localhost:5222
# VITE_NATS_URL=nats://localhost:5222

# ============================================================================
# NOTES
# ============================================================================
#
# Backend Variables (TALETRAIL_*):
#   - Read by Rust Tauri backend
#   - Override config.toml values
#   - Handle actual path resolution and NATS connections
#
# Frontend Variables (VITE_*):
#   - Read by Vite/Nuxt frontend
#   - Used for dev server configuration and display
#   - Frontend calls Tauri commands for actual operations
#
# Development Quick Start:
#   1. Copy this file: cp .env.example .env
#   2. Uncomment variables you want to override
#   3. Set custom values
#   4. Run: bun run tauri:dev
#
# Production Deployment:
#   - Set system environment variables instead of .env file
#   - Ensure all paths are valid on target system
#   - Test NATS connectivity before deployment
#
# Path Resolution:
#   - Backend resolves all paths (absolute or relative)
#   - Frontend NEVER uses absolute paths
#   - All file operations go through Tauri commands
#
