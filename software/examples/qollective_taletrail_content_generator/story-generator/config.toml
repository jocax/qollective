# Story Generator MCP Server Configuration
# All values can be overridden by environment variables with STORY_GENERATOR_ prefix
# Example: STORY_GENERATOR_NATS_URL=nats://production:4222

[service]
name = "story-generator"
version = "0.1.0"
description = "TaleTrail Story Generator MCP Server - Creates DAG structures and generates narrative content"

[nats]
url = "nats://localhost:5222"
subject = "mcp.story.generate"
queue_group = "story-generator"

[nats.auth]
# NKey authentication (replaces mTLS client certificates)
nkey_file = "./nkeys/story-generator.nk"

[nats.tls]
# TLS for encryption (no client cert needed with NKey auth)
ca_cert = "./certs/ca.pem"

[generation]
timeout_secs = 180
batch_size_min = 4
batch_size_max = 6
target_words_per_node = 400

[llm]
type = "lmstudio"
url = "http://127.0.0.1:1234/v1"
default_model = "meta-llama-3-8b-instruct"
use_default_model_fallback = true
timeout_secs = 180
max_tokens = 600
temperature = 0.7
system_prompt_style = "chatml"

[llm.models]
en = "meta-llama-3-8b-instruct"
de = "leolm-70b-chat"
