# ============================================================================
# TaleTrail Content Generator - Environment Configuration
# ============================================================================
# Copy this file to .env and customize values for your environment

# ============================================================================
# NATS Configuration (TLS-enabled)
# ============================================================================
NATS_URL=nats://localhost:5222
NATS_TLS_CA_CERT=./certs/ca.pem
NATS_TLS_CLIENT_CERT=./certs/client-cert.pem
NATS_TLS_CLIENT_KEY=./certs/client-key.pem
NATS_MONITOR_URL=http://localhost:9222

# ============================================================================
# LM Studio Configuration
# ============================================================================
LM_STUDIO_URL=http://127.0.0.1:1234
LM_STUDIO_MODEL_NAME=local-model

# ============================================================================
# Timeout Configuration (in seconds)
# ============================================================================
GENERATION_TIMEOUT_SECS=60
VALIDATION_TIMEOUT_SECS=10
NATS_CONNECT_TIMEOUT_SECS=10
REQUEST_TIMEOUT_SECS=120

# ============================================================================
# Retry Configuration
# ============================================================================
RETRY_MAX_ATTEMPTS=3
RETRY_BASE_DELAY_SECS=1
RETRY_MAX_DELAY_SECS=30

# ============================================================================
# Batch Processing Configuration
# ============================================================================
BATCH_SIZE_MIN=4
BATCH_SIZE_MAX=6
CONCURRENT_BATCHES=3
CONCURRENT_BATCHES_MAX=5

# ============================================================================
# Token Limits
# ============================================================================
MAX_TOKENS_PER_STORY=50000
MAX_TOKENS_PER_NODE=600
TARGET_WORDS_PER_NODE=400

# ============================================================================
# DAG Structure Configuration
# ============================================================================
DEFAULT_NODE_COUNT=16
CHOICES_PER_NODE=3
MAX_DAG_DEPTH=10

# ============================================================================
# HTTP Gateway Configuration
# ============================================================================
GATEWAY_HOST=0.0.0.0
GATEWAY_PORT=8443  # HTTPS port for TLS-enabled gateway

# Gateway TLS Certificates (Server role - for HTTPS)
GATEWAY_HTTP_TLS_CERT=./certs/gateway-cert.pem
GATEWAY_HTTP_TLS_KEY=./certs/gateway-key.pem

# Gateway NATS Client (connects to orchestrator)
# Uses shared client certificates for NATS communication

# ============================================================================
# Validation Configuration
# ============================================================================
MIN_QUALITY_SCORE=0.7
MAX_NEGOTIATION_ROUNDS=3

# ============================================================================
# Rate Limiting (requests per minute)
# ============================================================================
RATE_LIMIT_GENERATION=10
RATE_LIMIT_STATUS=60

# ============================================================================
# Security
# ============================================================================
JWT_SECRET=your-secret-change-in-production

# ============================================================================
# Logging
# ============================================================================
RUST_LOG=info
